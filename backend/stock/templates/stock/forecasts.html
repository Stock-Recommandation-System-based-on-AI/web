{% extends 'base.html' %}
{% load static %}

{% block additional_styles %}
<style>
  .title {
  overflow: hidden;
  text-align: left;
  margin-top: 100px;
}
.title h2 {
  color: #044A67;
  font-weight: bold;
  font-size: 35px;
  text-transform: uppercase;
  position: relative;
  display: inline-block;
  padding-right: 25px;
}
.title h2 ::after {
  content: '-';
  font-size: 2px;
  background: rgba(0, 0, 0, 0.1);
  color: rgba(0, 0, 0, 0.1);
  height: 4px;
  display: block;
  width: 2000%;
  position: absolute;
  right: -2000%;
  top: 50%;
}
.search-widget {
  border: solid;
  border-width: 0.5px;
  border-radius: 5px;
  border-color:#1E8BC3;
  padding:10px;
  width:100%;
  box-shadow: 2px 4px 4px 0px rgba(5, 5, 5, 0.06);
  margin-bottom: 50px;
}
label {
  font-weight: 700;
  margin-bottom: 20px;
  max-width: 100%;
}
.btn, .submit {
  font-family: "Montserrat", sans-serif, "FontAwesome";
  letter-spacing: 0.02em;
  font-weight: bold;
  border: 0;
  padding: 0 15px;
  height: 40px;
  line-height: 40px;
}
.entry-title h2 {
  margin-top: 0px;
  color: #044A67;
}
.entry-title h2 a{
  color: #044A67;
}
.entry-title h4 a:hover {
  text-decoration: none;
}
.stock-title small {
  font-size: 65%;
  font-weight: 400;
  line-height: 1;
  color: #777;
}
.follow, .unfollow {
  border: solid!important;
  padding-bottom: 38px!important;
  margin-top: 5px;
  margin-bottom: 10px;
}
.stock-chart {
  margin-bottom: 50px;
}
</style>
{% endblock %}

{% block content %}
<div class="main-wrapper">
  <section class="bg-white">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="title">
            <h2>
              <a href="{% url 'stock:forecasts' %}" style="color:inherit;text-decoration: none;">Stock Forecasts</a>
            </h2>
          </div>
        </div>
        <div class="col-md-12">
          <div class="search-widget">
            <form id="searchform" method="get" action="">
              <label for="amount">BROWSE OUR STOCK FORECASTS</label>  
              <div class="input-group search-form" role="form">
                <input type="text" class="form-control ui-autocomplete-input" name="s" id="txtSearch" value="" placeholder="Search by ticker or company name, leave empty for all." autocomplete="off">
                <span class="input-group-btn">
                  <button type="submit" class="btn"><i class="fa fa-search"></i></button>
                </span>
              </div>
            </form>
            <a style="margin-top:20px;" href="" class="btn"><i class="fa fa-chart-line"></i> ALL FORECASTS</a>
            <a style="margin-top:20px;color:red;" href="" class="btn"><i class="fa fa-chart-line"></i>STRONG SELL</a>
            <a style="margin-top:20px;color:#fd4444;" href="" class="btn"><i class="fa fa-chart-line"></i> SELL</a>
            <a style="margin-top:20px;color:#fec761;" href="" class="btn"><i class="fa fa-chart-line"></i> NEUTRAL</a>
            <a style="margin-top:20px;color:orange;" href="" class="btn"><i class="fa fa-chart-line"></i> HOLD</a>
            <a style="margin-top:20px;color:#51a952;" href="" class="btn"><i class="fa fa-chart-line"></i> BUY</a>
            <a style="margin-top:20px;color:green;" href="" class="btn"><i class="fa fa-chart-line"></i> STRONG BUY</a>
          </div>
        </div>
        <div class="col-md-12">
          <div class="entry-title">
            <h2 class="stock-title">
              <a href="" tabindex="0">삼성전자</a>
              <a href="/follow/ANET" class="btn follow"><i class="fa fa-plus"></i> 관심 종목 추가</a>
              <span style="display:inline-block;">
                <small>2021년 8월 30일</small>
                <small style="color:#fd4444;font-weight: bold;">SELL</small>
              </span>
            </h2>
          </div>
          <article class="stock-chart">
            <div class="tradingview-widget-container">
              <div id="tradingview_85381"></div>
            </div>
          </article>
        </div>
        <div class="col-md-12">
          <div class="entry-title">
            <h2 class="stock-title">
              <a href="" tabindex="0">SK하이닉스</a>
              <a href="/follow/ANET" class="btn follow"><i class="fa fa-plus"></i> 관심 종목 추가</a>
              <span style="display:inline-block;">
                <small>2021년 8월 30일</small>
                <small style="color:#fd4444;font-weight: bold;">SELL</small>
              </span>
            </h2>
          </div>
          <article class="stock-chart">
            <div class="tradingview-widget-container">
              <div id="tradingview_227d4"></div>
            </div>
          </article>
        </div>
        <div class="col-md-12">
          <div class="entry-title">
            <h2 class="stock-title">
              <a href="" tabindex="0">대한항공</a>
              <a href="/follow/ANET" class="btn follow"><i class="fa fa-plus"></i> 관심 종목 추가</a>
              <span style="display:inline-block;">
                <small>2021년 8월 30일</small>
                <small style="color:#fd4444;font-weight: bold;">SELL</small>
              </span>
            </h2>
          </div>
          <article class="stock-chart">
            <div class="tradingview-widget-container">
              <div id="tradingview_a2e75"></div>
            </div>
          </article>
        </div>
      </div>
    </div>
  </section>
</div>
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script type="text/javascript">
(() => {
      const obj = [
        {
          key: 'tradingview_85381',
          symbol: 'KRX:005930',
        },
        {
          key: 'tradingview_227d4',
          symbol: 'KRX:000660',
        },
        {
          key: 'tradingview_a2e75',
          symbol: 'KRX:003490',
        },

      ]

      obj.forEach(({ key, symbol }) => {
        console.log(key, symbol)
        
        new TradingView.widget(
          {
            "width": 1100,
            "height": 500,
            "symbol": symbol,
            "interval": "D",
            "timezone": "Asia/Seoul",
            "theme": "dark",
            "style": "1",
            "locale": "kr",
            "toolbar_bg": "#f1f3f6",
            "enable_publishing": false,
            "save_image": false,
            "container_id": key
          }
      );
    })
  })();
</script>
{% endblock %}